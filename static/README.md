# n8n-tweet Dashboard UI

技術者以外でも使いやすい Web ベースの監視ダッシュボードです。

## 機能

### 1. システムヘルス監視画面
- システム全体の稼働状況をリアルタイムで表示
- Redis、n8n、Twitter API の個別ステータス確認
- 詳細なヘルス情報をテーブル形式で表示

### 2. メトリクス表示画面
- メモリ使用量、CPU使用率、稼働時間を表示
- 今日のツイート数を表示
- パフォーマンスチャートによる視覚的な監視

### 3. ツイート履歴表示画面
- 送信済み、送信待ち、失敗したツイートの一覧表示
- ステータス、カテゴリ、日付によるフィルタリング機能
- ツイート内容と詳細情報の表示

### 4. RSSフィード状況画面
- 設定されているRSSフィードの稼働状況
- 最終更新時刻、記事数、有効/無効状態の表示
- フィード別の詳細ステータス

## 使用方法

### ダッシュボードの起動

```bash
# ダッシュボードサーバーを起動
node src/dashboard/server.js

# または環境変数でポートを指定
DASHBOARD_PORT=3001 node src/dashboard/server.js
```

### アクセス方法

1. ブラウザで `http://localhost:3000` にアクセス
2. ダッシュボードUI が自動的に読み込まれます
3. 上部のナビゲーションタブで各機能を切り替えられます

### API エンドポイント

REST API は以下のエンドポイントで利用可能です：

- `GET /api/v1/health` - システムヘルス
- `GET /api/v1/metrics` - パフォーマンスメトリクス
- `GET /api/v1/tweets` - ツイート履歴
- `GET /api/v1/feeds` - RSSフィード状況
- `GET /api` - API 情報

## 技術仕様

### フロントエンド
- **HTML5** + **Bootstrap 5.3** + **Font Awesome**
- **Vanilla JavaScript** (フレームワーク不使用)
- **Chart.js** によるメトリクス可視化
- レスポンシブデザイン対応

### バックエンド
- **Express.js** による静的ファイル配信
- **Helmet** によるセキュリティ強化
- **CORS** 対応

### 主要機能
- **自動更新**: 30秒間隔でデータを自動更新
- **リアルタイム監視**: ページ表示中は継続的にステータスを更新
- **エラーハンドリング**: API エラー時の適切な表示
- **ローディング状態**: データ読み込み中の視覚的フィードバック

## カスタマイズ

### スタイルの変更
`static/css/dashboard.css` を編集してデザインをカスタマイズできます。

### 更新間隔の変更
`static/js/dashboard.js` の `setupAutoUpdate()` メソッド内の間隔を変更できます：

```javascript
this.updateInterval = setInterval(() => {
    // 更新間隔を変更 (デフォルト: 30000ms = 30秒)
}, 30000);
```

### 新しい機能の追加
1. HTML に新しいタブコンテンツを追加
2. CSS でスタイリングを追加
3. JavaScript で新しいデータ読み込み関数を実装
4. API エンドポイントを追加（必要に応じて）

## トラブルシューティング

### ダッシュボードが表示されない
1. ダッシュボードサーバーが起動しているか確認
2. ポートが他のプロセスで使用されていないか確認
3. ブラウザのコンソールでエラーメッセージを確認

### API エラーが発生する
1. バックエンドサービス（Redis、n8n等）が起動しているか確認
2. ネットワーク接続を確認
3. ログファイルでエラー詳細を確認

### パフォーマンスが悪い
1. 自動更新を一時停止（ブラウザタブを別のタブに切り替える）
2. フィルターを使用してデータ量を制限
3. 更新間隔を長くする

## セキュリティ

- **CSP（Content Security Policy）** によるXSS攻撃防止
- **Helmet** による各種セキュリティヘッダー設定
- **CORS** による適切なオリジン制御
- 静的ファイルの適切なキャッシュ設定

## ブラウザ対応

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

モダンブラウザの ES2015+ 機能を使用しています。